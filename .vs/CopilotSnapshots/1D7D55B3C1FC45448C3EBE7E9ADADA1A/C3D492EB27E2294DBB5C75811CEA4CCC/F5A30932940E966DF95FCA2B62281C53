using QuestionarioOnline.Domain.Entities;
using QuestionarioOnline.Domain.ValueObjects;
using QuestionarioOnline.Infrastructure.Persistence;

namespace QuestionarioOnline.Infrastructure.Extensions;

public static class DbInitializer
{
    public static async Task SeedAsync(QuestionarioOnlineDbContext context)
    {
        if (context.UsuariosInternos.Any())
            return;

        var usuarioAdmin = new UsuarioInterno(
            "Administrador",
            Email.Create("admin@questionarioonline.com"),
            BCrypt.Net.BCrypt.HashPassword("Admin@123")
        );

        var usuarioAnalista = new UsuarioInterno(
            "Analista Teste",
            Email.Create("analista@empresa.com"),
            BCrypt.Net.BCrypt.HashPassword("Senha123")
        );

        context.UsuariosInternos.AddRange(usuarioAdmin, usuarioAnalista);

        await context.SaveChangesAsync();
    }
}
