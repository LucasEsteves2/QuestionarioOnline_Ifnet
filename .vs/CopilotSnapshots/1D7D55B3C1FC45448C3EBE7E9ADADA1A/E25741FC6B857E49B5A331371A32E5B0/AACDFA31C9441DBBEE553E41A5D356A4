using FluentValidation;
using QuestionarioOnline.Application.DTOs;

namespace QuestionarioOnline.Application.Validators;

/// <summary>
/// Validador para requisição de resposta
/// </summary>
public class RegistrarRespostaRequestValidator : AbstractValidator<RegistrarRespostaRequest>
{
    public RegistrarRespostaRequestValidator()
    {
        RuleFor(x => x.QuestionarioId)
            .NotEmpty().WithMessage("ID do questionário é obrigatório");

        RuleFor(x => x.Respostas)
            .NotEmpty().WithMessage("Deve haver pelo menos uma resposta");

        RuleFor(x => x.IpAddress)
            .NotEmpty().WithMessage("IP é obrigatório");

        RuleFor(x => x.UserAgent)
            .NotEmpty().WithMessage("UserAgent é obrigatório");

        RuleFor(x => x.Estado)
            .Length(2).WithMessage("Estado deve ter 2 caracteres (UF)")
            .When(x => !string.IsNullOrEmpty(x.Estado));

        RuleFor(x => x.Cidade)
            .MaximumLength(100).WithMessage("Cidade deve ter no máximo 100 caracteres")
            .When(x => !string.IsNullOrEmpty(x.Cidade));
    }
}
