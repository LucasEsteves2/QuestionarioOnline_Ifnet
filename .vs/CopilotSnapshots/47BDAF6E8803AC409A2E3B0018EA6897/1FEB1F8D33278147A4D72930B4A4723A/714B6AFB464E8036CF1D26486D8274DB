using QuestionarioOnline.Application.DTOs.Responses;

namespace QuestionarioOnline.Api.Contracts.Responses;

/// <summary>
/// Response completo de um questionário (API Contract)
/// </summary>
public record QuestionarioResponse(
    Guid Id,
    string Titulo,
    string? Descricao,
    string Status,
    DateTime DataInicio,
    DateTime DataFim,
    DateTime DataCriacao,
    DateTime? DataEncerramento,
    List<PerguntaResponse> Perguntas
)
{
    public static QuestionarioResponse From(QuestionarioDto dto) => new(
        dto.Id,
        dto.Titulo,
        dto.Descricao,
        dto.Status,
        dto.DataInicio,
        dto.DataFim,
        dto.DataCriacao,
        dto.DataEncerramento,
        dto.Perguntas.Select(PerguntaResponse.From).ToList()
    );
}

/// <summary>
/// Response de uma pergunta
/// </summary>
public record PerguntaResponse(
    Guid Id,
    string Texto,
    int Ordem,
    bool Obrigatoria,
    List<OpcaoResponse> Opcoes
)
{
    public static PerguntaResponse From(PerguntaDto dto) => new(
        dto.Id,
        dto.Texto,
        dto.Ordem,
        dto.Obrigatoria,
        dto.Opcoes.Select(OpcaoResponse.From).ToList()
    );
}

/// <summary>
/// Response de uma opção de resposta
/// </summary>
public record OpcaoResponse(
    Guid Id,
    string Texto,
    int Ordem
)
{
    public static OpcaoResponse From(OpcaoDto dto) => new(
        dto.Id,
        dto.Texto,
        dto.Ordem
    );
}
