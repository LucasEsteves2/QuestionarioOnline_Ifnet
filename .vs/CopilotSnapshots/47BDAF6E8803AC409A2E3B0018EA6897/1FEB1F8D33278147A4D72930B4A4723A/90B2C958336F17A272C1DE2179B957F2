using AppDto = QuestionarioOnline.Application.DTOs.Requests;

namespace QuestionarioOnline.Api.Contracts.Requests;

/// <summary>
/// Request para registrar resposta de questionário (API Contract)
/// </summary>
public record RegistrarRespostaRequest(
    Guid QuestionarioId,
    List<RespostaItemRequest> Respostas,
    string? Estado = null,
    string? Cidade = null,
    string? RegiaoGeografica = null
)
{
    public AppDto.RegistrarRespostaRequest ToApplicationDto() => new(
        QuestionarioId,
        Respostas.Select(r => new AppDto.RespostaItemDto(r.PerguntaId, r.OpcaoRespostaId)).ToList(),
        Estado,
        Cidade,
        RegiaoGeografica
    );
}

/// <summary>
/// Item de resposta (pergunta + opção escolhida)
/// </summary>
public record RespostaItemRequest(
    Guid PerguntaId,
    Guid OpcaoRespostaId
);
